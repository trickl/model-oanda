{
  "id": "urn:jsonschema:com:trickl:model:oanda:account:AccountChanges",
  "type": "object",
  "properties": {
    "ordersCreated": {
      "description": "The Orders created. These Orders may have been filled, cancelled or triggered in the same period.",
      "type": "array",
      "items": {
        "id": "urn:jsonschema:com:trickl:model:oanda:order:Order",
        "type": "object",
        "properties": {
          "createTime": {
            "description": "The time when the Order was created.",
            "type": "string"
          },
          "id": {
            "description": "The Order's identifier, unique within the Order's Account.",
            "type": "string"
          },
          "state": {
            "description": "The current state of the Order.",
            "type": "string",
            "enum": [
              "PENDING",
              "FILLED",
              "TRIGGERED",
              "CANCELLED"
            ]
          },
          "clientExtensions": {
            "id": "urn:jsonschema:com:trickl:model:oanda:transaction:ClientExtensions",
            "type": "object",
            "properties": {
              "comment": {
                "description": "A comment associated with the Order\/Trade",
                "type": "string"
              },
              "id": {
                "description": "The Client ID of the Order\/Trade",
                "type": "string"
              },
              "tag": {
                "description": "A tag associated with the Order\/Trade",
                "type": "string"
              }
            }
          }
        }
      }
    },
    "tradesReduced": {
      "description": "The Trades reduced",
      "type": "array",
      "items": {
        "type": "object",
        "$ref": "urn:jsonschema:com:trickl:model:oanda:trade:TradeSummary"
      }
    },
    "ordersCancelled": {
      "description": "The Orders cancelled.",
      "type": "array",
      "items": {
        "type": "object",
        "$ref": "urn:jsonschema:com:trickl:model:oanda:order:Order"
      }
    },
    "tradesClosed": {
      "description": "The Trades closed.",
      "type": "array",
      "items": {
        "type": "object",
        "$ref": "urn:jsonschema:com:trickl:model:oanda:trade:TradeSummary"
      }
    },
    "ordersFilled": {
      "description": "The Orders filled.",
      "type": "array",
      "items": {
        "type": "object",
        "$ref": "urn:jsonschema:com:trickl:model:oanda:order:Order"
      }
    },
    "tradesOpened": {
      "description": "The Trades opened.",
      "type": "array",
      "items": {
        "id": "urn:jsonschema:com:trickl:model:oanda:trade:TradeSummary",
        "type": "object",
        "properties": {
          "initialMarginRequired": {
            "description": "The margin required at the time the Trade was created. Note, this is the 'pure' margin required, it is not the 'effective' margin used that factors in the trade risk if a GSLO is attached to the trade.",
            "type": "string"
          },
          "currentUnits": {
            "description": "The number of units currently open for the Trade. This value is reduced to 0.0 as the Trade is closed.",
            "type": "string"
          },
          "instrument": {
            "description": "The Trade's Instrument.",
            "type": "string"
          },
          "averageClosePrice": {
            "description": "The average closing price of the Trade. Only present if the Trade has been closed or reduced at least once.",
            "type": "string"
          },
          "initialUnits": {
            "description": "The initial size of the Trade. Negative values indicate a short Trade, and positive values indicate a long Trade.",
            "type": "string"
          },
          "clientExtensions": {
            "type": "object",
            "$ref": "urn:jsonschema:com:trickl:model:oanda:transaction:ClientExtensions"
          },
          "realizedPL": {
            "description": "The total profit\/loss realized on the closed portion of the Trade.",
            "type": "string"
          },
          "unrealizedPL": {
            "description": "The unrealized profit\/loss on the open portion of the Trade.",
            "type": "string"
          },
          "takeProfitOrderID": {
            "description": "ID of the Trade's Take Profit Order, only provided if such an Order exists.",
            "type": "string"
          },
          "marginUsed": {
            "description": "Margin currently used by the Trade.",
            "type": "string"
          },
          "closingTransactionIDs": {
            "description": "The IDs of the Transactions that have closed portions of this Trade.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "price": {
            "description": "The execution price of the Trade.",
            "type": "string"
          },
          "financing": {
            "description": "The financing paid\/collected for this Trade.",
            "type": "string"
          },
          "closeTime": {
            "description": "The date\/time when the Trade was fully closed. Only provided for Trades whose state is CLOSED.",
            "type": "string"
          },
          "id": {
            "description": "The Trade's identifier, unique within the Trade's Account.",
            "type": "string"
          },
          "state": {
            "description": "The current state of the Trade.",
            "type": "string",
            "enum": [
              "OPEN",
              "CLOSED",
              "CLOSE_WHEN_TRADEABLE"
            ]
          },
          "stopLossOrderID": {
            "description": "ID of the Trade's Stop Loss Order, only provided if such an Order exists.",
            "type": "string"
          },
          "trailingStopLossOrderID": {
            "description": "ID of the Trade's Trailing Stop Loss Order, only provided if such an Order exists.",
            "type": "string"
          },
          "openTime": {
            "description": "The date\/time when the Trade was opened.",
            "type": "string"
          }
        }
      }
    },
    "ordersTriggered": {
      "description": "The Orders triggered.",
      "type": "array",
      "items": {
        "type": "object",
        "$ref": "urn:jsonschema:com:trickl:model:oanda:order:Order"
      }
    },
    "positions": {
      "description": "The Positions changed.",
      "type": "array",
      "items": {
        "id": "urn:jsonschema:com:trickl:model:oanda:position:Position",
        "type": "object",
        "properties": {
          "unrealizedPL": {
            "description": "The unrealized profit\/loss of all open Trades that contribute to this Position.",
            "type": "string"
          },
          "marginUsed": {
            "description": "Margin currently used by the Position.",
            "type": "string"
          },
          "resettablePL": {
            "description": "Profit\/loss realized by the Position since the Account's resettablePL was last reset by the client.",
            "type": "string"
          },
          "guaranteedExecutionFees": {
            "description": "The total amount of fees charged over the lifetime of the Account for the execution of guaranteed Stop Loss Orders for this instrument.",
            "type": "string"
          },
          "financing": {
            "description": "The total amount of financing paid\/collected for this instrument over the lifetime of the Account.",
            "type": "string"
          },
          "short": {
            "type": "object",
            "$ref": "urn:jsonschema:com:trickl:model:oanda:position:PositionSide"
          },
          "instrument": {
            "description": "The Position's Instrument.",
            "type": "string"
          },
          "commission": {
            "description": "The total amount of commission paid for this instrument over the lifetime of the Account.",
            "type": "string"
          },
          "pandl": {
            "description": "Profit\/loss realized by the Position over the lifetime of the Account.",
            "type": "string"
          },
          "long": {
            "id": "urn:jsonschema:com:trickl:model:oanda:position:PositionSide",
            "type": "object",
            "properties": {
              "tradeIDs": {
                "description": "List of the open Trade IDs which contribute to the open Position.",
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "unrealizedPL": {
                "description": "The unrealized profit\/loss of all open Trades that contribute to this PositionSide.",
                "type": "string"
              },
              "resettablePL": {
                "description": "Profit\/loss realized by the PositionSide since the Account's resettablePL was last reset by the client.",
                "type": "string"
              },
              "guaranteedExecutionFees": {
                "description": "The total amount of fees charged over the lifetime of the Account for the execution of guaranteed Stop Loss Orders attached to Trades for this PositionSide.",
                "type": "string"
              },
              "financing": {
                "description": "The total amount of financing paid\/collected for this PositionSide over the lifetime of the Account.",
                "type": "string"
              },
              "units": {
                "description": "Number of units in the position (negative value indicates short position, positive indicates long position).",
                "type": "string"
              },
              "averagePrice": {
                "description": "Volume-weighted average of the underlying Trade open prices for the Position.",
                "type": "string"
              },
              "pl": {
                "description": "Profit\/loss realized by the PositionSide over the lifetime of the Account.",
                "type": "string"
              }
            }
          }
        }
      }
    },
    "transactions": {
      "description": "The Transactions that have been generated.",
      "type": "array",
      "items": {
        "id": "urn:jsonschema:com:trickl:model:oanda:transaction:Transaction",
        "type": "object",
        "properties": {
          "accountID": {
            "description": "The ID of the Account the Transaction was created for.",
            "type": "string"
          },
          "requestID": {
            "description": "The Request ID of the request which generated the transaction.",
            "type": "string"
          },
          "id": {
            "description": "The Transaction's Identifier.",
            "type": "string"
          },
          "time": {
            "description": "The date\/time when the Transaction was created.",
            "type": "string"
          },
          "type": {
            "description": "The Type of the Transaction.",
            "type": "string",
            "enum": [
              "CREATE",
              "CLOSE",
              "REOPEN",
              "CLIENT_CONFIGURE",
              "CLIENT_CONFIGURE_REJECT",
              "TRANSFER_FUNDS",
              "TRANSFER_FUNDS_REJECT",
              "MARKET_ORDER",
              "MARKET_ORDER_REJECT",
              "FIXED_PRICE_ORDER",
              "LIMIT_ORDER",
              "LIMIT_ORDER_REJECT",
              "STOP_ORDER",
              "STOP_ORDER_REJECT",
              "MARKET_IF_TOUCHED_ORDER",
              "MARKET_IF_TOUCHED_ORDER_REJECT",
              "TAKE_PROFIT_ORDER",
              "TAKE_PROFIT_ORDER_REJECT",
              "STOP_LOSS_ORDER",
              "STOP_LOSS_ORDER_REJECT",
              "TRAILING_STOP_LOSS_ORDER",
              "TRAILING_STOP_LOSS_ORDER_REJECT",
              "ORDER_FILL",
              "ORDER_CANCEL",
              "ORDER_CANCEL_REJECT",
              "ORDER_CLIENT_EXTENSIONS_MODIFY",
              "ORDER_CLIENT_EXTENSIONS_MODIFY_REJECT",
              "TRADE_CLIENT_EXTENSIONS_MODIFY",
              "TRADE_CLIENT_EXTENSIONS_MODIFY_REJECT",
              "MARGIN_CALL_ENTER",
              "MARGIN_CALL_EXTEND",
              "MARGIN_CALL_EXIT",
              "DELAYED_TRADE_CLOSURE",
              "DAILY_FINANCING",
              "RESET_RESETTABLE_PL"
            ]
          },
          "batchID": {
            "description": "The ID of the \"batch\" that the Transaction belongs to. Transactions in the same batch are applied to the Account simultaneously.",
            "type": "string"
          },
          "userID": {
            "description": "The ID of the user that initiated the creation of the Transaction.",
            "type": "integer"
          }
        }
      }
    }
  }
}